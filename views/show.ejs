<!DOCTYPE html>
<html lang="en">
  <head>
    <title>The Art Gallery</title>

    <link rel="stylesheet" href="/main.css" />
    <link rel="stylesheet" href="/scroll.css" />
  </head>
  <body>
 
    <header class="header show-on-scroll">
      <div>
        <img
          src="<%= painting.img %>"
          class="blur-round-img"
        />
      </div>
      <div></div>
      </div>
      <p class="rating-text">
        Number <%= painting.rating %> in world rating
        </p>
      <h1 class="heading"><%= painting.artist %></h1>
    </header>

    
    <article class="content">
      <h2><%= painting.name %></h2>
      <h3>$<%= painting.price %> million</h3>
      
        <p>Year: <%= painting.year %></p>
        <p>Medium: <%= painting.medium %></p>
        <p>Style: <%= painting.style %></p>
        <p>Owner: <%= painting.owner %></p>
      
      <a href="/paintings/new"><button>Add a New Product</button></a>
      <img
        src="<%= painting.img %>"
        alt="<%= painting.name %>"
        class="inline-img show-on-scroll"
      />
      
      <footer><%- include('./partials/footer.ejs')%></footer>
    <script>
        let elementsToShow = document.querySelectorAll(".show-on-scroll");

      function loop() {
        elementsToShow.forEach(function (element) {
          if (isElementInViewport(element)) {
            element.classList.add("is-visible");
          } else {
            element.classList.remove("is-visible");
          }
        });

        scroll(loop);
      }

      // Call the loop for the first time
      loop();

 
      function isElementInViewport(el) {
      
        if (typeof jQuery === "function" && el instanceof jQuery) {
          el = el[0];
        }
        let rect = el.getBoundingClientRect();
        return (
          (rect.top <= 0 && rect.bottom >= 0) ||
          (rect.bottom >=
            (window.innerHeight || document.documentElement.clientHeight) &&
            rect.top <=
              (window.innerHeight || document.documentElement.clientHeight)) ||
          (rect.top >= 0 &&
            rect.bottom <=
              (window.innerHeight || document.documentElement.clientHeight))
        );
      }
    </script>

    <script src="javascripts/show-on-scroll.js"></script>
  </body>
</html>
